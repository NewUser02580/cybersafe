<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CyberSafe ‚Äì Link & Password Checker</title>
  <link rel="stylesheet" href="static\style.css">
</head>
<body>
  <div class="card">
    <div class="header">
      <div class="logo">üîí CyberSafe</div>
      <button id="theme-toggle">üåô</button>
    </div>

    <div class="content">
      <div class="left">
        <div id="tabs" class="tabs">
          <div id="tab-link" class="tab active" onclick="showTab('link')">Link Checker</div>
          <div id="tab-pass" class="tab" onclick="showTab('pass')">Password Checker</div>
        </div>

        <!-- Link Form -->
        <form method="POST" id="form-link" style="display:block;">
          <input type="text" name="url" placeholder="Enter URL (example: https://example.com)" />
          <button type="submit">Check Link</button>
        </form>

        <!-- Password Form -->
        <form method="POST" id="form-pass" style="display:none;">
          <input type="password" id="password-input" name="password" placeholder="Enter password to check (won't be stored)" />
          <div id="strength-text" class="strength-text">Type a password...</div>
          <div class="strength-bar">
            <div id="strength-fill"></div>
          </div>
          <div id="strength-hints" class="note"></div>
          <button type="submit">Check Password</button>
        </form>

        {% if result %}
          <div class="result {% if result_type=='safe' %}safe{% elif result_type=='warn' %}warn{% elif result_type=='danger' %}danger{% else %}{% endif %}">
            {{ result }}
          </div>
        {% endif %}
      </div>

      <div class="right">
        <h3>How it works</h3>
        <p class="note">Link checks combine heuristics (HTTP, IP address, suspicious words) and Google Safe Browsing for known threats.</p>
        <h4 style="margin-top:12px;">Password check</h4>
        <p class="note">We compute SHA1(password), send only 5 chars to HaveIBeenPwned, and compare suffixes. Your password itself is never sent.</p>
        <h4 style="margin-top:12px;">Quick tips</h4>
        <ul style="margin-top:6px;color:#475569;font-size:0.95rem;">
          <li>Never reuse passwords across sites.</li>
          <li>Prefer long passphrases or a password manager.</li>
          <li>Be cautious of links with IPs, odd ports, or words like 'verify'.</li>
        </ul>
      </div>
    </div>

    <div class="footer">Made with ‚ù§Ô∏è ‚Äî keep your online life safer</div>
  </div>

  <script>
    function showTab(name) {
      document.getElementById('form-link').style.display = name === 'link' ? 'block' : 'none';
      document.getElementById('form-pass').style.display = name === 'pass' ? 'block' : 'none';
      document.getElementById('tab-link').classList.toggle('active', name === 'link');
      document.getElementById('tab-pass').classList.toggle('active', name === 'pass');
    }

    // Dark/Light theme toggle
    const toggleBtn = document.getElementById('theme-toggle');
    const body = document.body;
    toggleBtn.addEventListener('click', () => {
      body.classList.toggle('dark');
      if (body.classList.contains('dark')) {
        toggleBtn.textContent = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'dark');
      } else {
        toggleBtn.textContent = 'üåô';
        localStorage.setItem('theme', 'light');
      }
    });
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark');
      toggleBtn.textContent = '‚òÄÔ∏è';
    }

    // Password Strength Meter with hints
    const passwordInput = document.getElementById('password-input');
    const strengthText = document.getElementById('strength-text');
    const strengthFill = document.getElementById('strength-fill');
    const strengthHints = document.getElementById('strength-hints');

    if (passwordInput) {
      passwordInput.addEventListener('input', () => {
        const val = passwordInput.value;
        let score = 0;
        let hints = [];

        if (val.length >= 8) score++; else hints.push("Use at least 8 characters");
        if (/[A-Z]/.test(val)) score++; else hints.push("Add uppercase letters");
        if (/[0-9]/.test(val)) score++; else hints.push("Add numbers");
        if (/[^A-Za-z0-9]/.test(val)) score++; else hints.push("Add special characters");

        let strength = "";
        let width = (score * 25) + "%";

        switch(score) {
          case 0: strength = "Type a password..."; break;
          case 1: strength = "Weak"; break;
          case 2: strength = "Fair"; break;
          case 3: strength = "Good"; break;
          case 4: strength = "Strong"; break;
        }

        // Gradient fill
        const gradientColors = ["#dc2626", "#f59e0b", "#eab308", "#16a34a"];
        strengthFill.style.width = width;
        strengthFill.style.background = `linear-gradient(to right, ${gradientColors[0]}, ${gradientColors[score-1] || gradientColors[0]})`;

        strengthText.textContent = strength;
        strengthHints.innerHTML = hints.length ? "Suggestions: " + hints.join(", ") : "Your password looks good!";
      });
    }
  </script>
</body>
</html>
